@baseUrl = http://localhost:5000/api
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhbGljZS5kdXBvbnRAZXhhbXBsZS5jb20iLCJyb2xlSWQiOjEsImlhdCI6MTczNzY0NjEyMiwiZXhwIjoxNzM3NjQ5NzIyfQ.qDcd_Weys9RAe-lAabB_52rNT_QwJVQH4X_f1OlLIfg
@randomSuffix = {{Math.floor(Date.now()/1000)}}

### LOGIN ADMIN
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "alice.dupont@example.com",
  "password": "password1"
}

### CRÉER UN DEVIS
POST {{baseUrl}}/quotes
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "company_id": 1,
  "interlocutor_id": 1,
  "user_id": 1,
  "formula_id": 1,
  "engagement_duration": 12,
  "status": "projet",
  "valid_until": "2025-02-22",
  "tax_rate": 20,
  "notes": "Devis de test",
  "discount_type": "percentage",
  "discount_value": 5,
  "equipments": [
    {
      "equipment_id": 5,
      "quantity": 2,
      "unit_price_ht": 100,
      "is_first_unit_free": false
    }
  ]
}

### CRÉER UN DEVIS AVEC FORMULE ET OPTIONS
POST {{baseUrl}}/quotes
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "company_id": 1,
  "interlocutor_id": 1,
  "user_id": 1,
  "formula_id": 1,
  "engagement_duration": 12,
  "status": "projet",
  "valid_until": "2025-02-22",
  "tax_rate": 20,
  "notes": "Devis de test avec formule et options",
  "discount_type": "percentage",
  "discount_value": 5,
  "equipments": [
    {
      "equipment_id": 16,
      "quantity": 2,
      "unit_price_ht": 100,
      "is_first_unit_free": false
    }
  ],
  "options": [
    {
      "option_id": 13
    },
    {
      "option_id": 8
    }
  ]
}

### CRÉER UN DEVIS AVEC FORMULE COMPLÈTE
POST {{baseUrl}}/quotes
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "company_id": 1,
  "interlocutor_id": 1,
  "user_id": 1,
  "formula_id": 1,
  "engagement_duration": 12,
  "status": "projet",
  "valid_until": "2025-02-22",
  "tax_rate": 20,
  "notes": "Devis avec formule complète",
  "equipments": [
    {
      "equipment_id": 16,
      "quantity": 2,
      "unit_price_ht": 100,
      "is_first_unit_free": false
    }
  ],
  "formula_options": [
    {
      "option_id": 1,
      "quantity": 1
    }
  ],
  "formula_customizations": {
    "installation_included": true,
    "maintenance_included": true,
    "hotline_included": true
  }
}

### GET TOUS LES DEVIS
GET {{baseUrl}}/quotes
Authorization: Bearer {{adminToken}}

### OBTENIR UN DEVIS PAR ID
GET {{baseUrl}}/quotes/36
Authorization: Bearer {{adminToken}}

### METTRE À JOUR UN DEVIS
PUT {{baseUrl}}/quotes/19
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "status": "en_cours"
}

### SOUMETTRE UN DEVIS
POST {{baseUrl}}/quotes/19/submit
Authorization: Bearer {{adminToken}}

### AJOUTER UNE OPTION AU DEVIS
POST {{baseUrl}}/quotes/19/options
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "option_id": 2
}

### SUPPRIMER UN DEVIS
DELETE {{baseUrl}}/quotes/1
Authorization: Bearer {{adminToken}}

### APPROUVER UN DEVIS
POST {{baseUrl}}/quotes/2/approve
Authorization: Bearer {{adminToken}}

### REJETER UN DEVIS
POST {{baseUrl}}/quotes/2/reject
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "reason": "Motif de rejet"
}

### AJOUTER UNE OPTION AU DEVIS
POST {{baseUrl}}/quotes/19/options
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "option_id": 2
}


